-- Integrantes | RM
-- Augusto Barcelos Barros | 98078
-- Gabriel Souza de Queiroz | 98570

-- 2.1 Na tabela “T_CKP_CATEGORIA”, crie a instrução SQL, comando DDL para alterar o nome da coluna “ds_sigla_categoria” para “ds_sigla_categ”.
ALTER TABLE T_CKP_CATEGORIA RENAME COLUMN DS_SIGLA_CATEGORIA TO DS_SIGLA_CATEG;

-- 2.2 Na tabela “T_CKP_CATEGORIA”, crie a instrução SQL, comando DDL para alterar o nome da UNIQUE constraint “UN_CKP_CATEGORIA_DESC” para “UN_CKP_CATEG_DESC”.
ALTER TABLE T_CKP_CATEGORIA RENAME CONSTRAINT UN_CKP_CATEGORIA_DESC TO UN_CKP_CATEG_DESC;

SELECT
    CONSTRAINT_NAME,
    CONSTRAINT_TYPE,
    SEARCH_CONDITION
FROM
    USER_CONSTRAINTS
WHERE
    TABLE_NAME = 'T_CKP_CATEGORIA';

-- 2.3 Na tabela “T_CKP_AUTOR”, crie a instrução SQL, comando DDL para alterar o tamanho da coluna “nm_segundo_autor” para 30 caracteres.  Visualização antes da execução do comando solicitado.
ALTER TABLE T_CKP_AUTOR MODIFY NM_SEGUNDO_AUTOR VARCHAR2(30);

DESC T_CKP_AUTOR;

-- 2.4 Na tabela “T_CKP_AUTOR”, crie a instrução SQL, comando DDL para adicionar coluna “ds_email”, com tipo de dado VARCHAR2, tamanho 40 caracteres e obrigatória.
ALTER TABLE T_CKP_AUTOR ADD DS_EMAIL VARCHAR2(40) NOT NULL;

DESC T_CKP_AUTOR;

-- 2.5 Na tabela “T_CKP_AUTOR”, crie a instrução SQL, comando DDL para alterar o tamanho da coluna “ds_email” para 60 caracteres e elimine a constraint NOT NULL da coluna “ds_email”, utilizando uma única instrução.
ALTER TABLE T_CKP_AUTOR MODIFY DS_EMAIL VARCHAR2(60) NULL;

DESC T_CKP_AUTOR;

-- 2.6 Na tabela “T_CKP_AUTOR_LIVRO”, crie a instrução SQL, comando DDL para alterar o tamanho da coluna “nr_isbn” para 13 dígitos.
ALTER TABLE T_CKP_AUTOR_LIVRO MODIFY NR_ISBN NUMBER(13);

DESC T_CKP_AUTOR_LIVRO;

-- 2.7 Na tabela “T_CKP_LIVRO”, crie a instrução SQL, comando DDL para alterar o tamanho da coluna “nr_isbn” para 13 dígitos. Observe que esta coluna é uma chave primária, uma vez alterada, se faz necessário alterar a chave estrangeira também, como feito primeiramente no item 2.6.
ALTER TABLE T_CKP_LIVRO MODIFY NR_ISBN NUMBER(13);

DESC T_CKP_LIVRO;

-- 2.8 Na tabela “T_CKP_AUTOR”, crie a instrução SQL, comando DDL para alterar adicionar a coluna “nm_pais_origem” (nome do país de origem do autor), com tipo de dado VARCHAR2, tamanho 30 caracteres e não obrigatório (opcional).
ALTER TABLE T_CKP_AUTOR ADD NM_PAIS_ORIGEM VARCHAR2(30) NULL;

DESC T_CKP_AUTOR;

-- 2.9 Na tabela “T_CKP_LIVRO”, crie a instrução SQL, comando DDL para alterar adicionar a constraint UNIQUE para a coluna “nm_titulo”. Nomeie a constraint como: “UN_CKP_LIVRO_TITULO”.
ALTER TABLE T_CKP_LIVRO ADD CONSTRAINT UN_CKP_LIVRO_TITULO UNIQUE(NM_TITULO);

SELECT
    CONSTRAINT_NAME,
    CONSTRAINT_TYPE,
    SEARCH_CONDITION
FROM
    USER_CONSTRAINTS
WHERE
    TABLE_NAME = 'T_CKP_LIVRO';

-- 2.10 Na tabela “T_CKP_AUTOR_LIVRO”, crie a instrução SQL, comando DDL para eliminar a constraint chave estrangeira “FK_CKP_AUTOR_LIVRO_AUTOR”.
ALTER TABLE T_CKP_AUTOR_LIVRO DROP CONSTRAINT FK_CKP_AUTOR_LIVRO_AUTOR;

SELECT
    CONSTRAINT_NAME,
    CONSTRAINT_TYPE,
    SEARCH_CONDITION
FROM
    USER_CONSTRAINTS
WHERE
    TABLE_NAME = 'T_CKP_AUTOR_LIVRO';

-- 2.11 Na tabela “T_CKP_LIVRO”, crie a instrução SQL, comando DDL para eliminar a constraint chave primária “PK_CKP_LIVRO”, com a opção “CASCADE”, que elimina o relacionamento existente.
ALTER TABLE T_CKP_LIVRO DROP CONSTRAINT PK_CKP_LIVRO CASCADE;

-- Atenção: VISUALIZE AS CONSTRAINTS DAS TABELAS “LIVRO” E “AUTOR_LIVRO”, OBSERVE QUE NA TABELA “AUTOR_LIVRO”, É ELIMINADA A CHAVE ESTRANGEIRA, DEVIDO A OPÇÃO ‘’CASCADE”.
SELECT
    CONSTRAINT_NAME,
    CONSTRAINT_TYPE,
    SEARCH_CONDITION
FROM
    USER_CONSTRAINTS
WHERE
    TABLE_NAME = 'T_CKP_LIVRO';

SELECT
    CONSTRAINT_NAME,
    CONSTRAINT_TYPE,
    SEARCH_CONDITION
FROM
    USER_CONSTRAINTS
WHERE
    TABLE_NAME = 'T_CKP_AUTOR_LIVRO';

-- 2.12 Na tabela “T_CKP_CATEGORIA”, crie a instrução SQL, comando DDL para desabilitar a constraint UNIQUE “UN_CKP_CATEGORIA_SIGLA” associada a coluna “ds_sigla_categ”.
ALTER TABLE T_CKP_CATEGORIA DISABLE CONSTRAINT UN_CKP_CATEGORIA_SIGLA;

SELECT
    CONSTRAINT_NAME,
    CONSTRAINT_TYPE,
    SEARCH_CONDITION
FROM
    USER_CONSTRAINTS
WHERE
    TABLE_NAME = 'T_CKP_CATEGORIA';